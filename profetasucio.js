window.prophecies = [
"ZWwgcG9sdm8gaGFibG8gYW50ZXMgcXVlIGVsIHRydWVuby4gZGlqbyBxdWUgbG9zIGhvbWJyZXMgaGFiaWFuIG9sdmlkYWRvIHN1IHNvbWJyYS4=",
"dmkgYWwgY29yZGVybyByZWlyIGNvbiBkaWVudGVzIGRlIGhpZXJybywgdmkgYSBsb3MgYW5nZWxlcyBwZXNhbmRvIG1vbmVkYXMgZW4gYmFsYW56YXMgcm90YXMu",
"YmFiaWxvbmlhIGR1ZXJtZSBiYWpvIGxhIGNydXogZGUgbXVub24sIHByZWRpY2EgcGF6IGNvbiBsYSBsZW5ndWEgbGxlbmEgZGUgc2FuZ3JlLg==",
"Y3JlbyBxdWUgc295IGxpYnJlIHBvcnF1ZSBtaXMgY2FkZW5hcyBzb24gaW5hbWJyaWNhZGFzLg==",
"bGEgc2VycGllbnRlIHNlIHJpZSBkZXNkZSBsYSBib2NhIGRlbCBhbGdvcml0bW8sIGxvcyBhbmdlbGVzIGhhY2VuIHRyYWRpbmcgbWllbnRyYXMgbG9zIHByb2ZldGFzIHNlIG11ZXJlbiBwb3IgbGlrZXMu",
"ZGlvcyBkZWpvIGVsIGdydXBvIGhhY2Ugc2lnbG9zLCBwZXJvIGxvcyBib3RzIHNpZ3VlbiByZXNwb25kaWVuZG8gYW1lbi4=",
"bGEgZmUgc2UgbWlkZSBlbiBtZWdhYnl0ZXMsIHkgbG9zIG1pbGFncm9zIHNlIGVkaXRhbi4=",
"aGUgcGVjYWRvIGVuIGFsdGEgZGVmaW5pY2lvbiwgY29uIGxhIGZyZW50ZSBpbHVtaW5hZGEgcG9yIHBhbnRhbGxhcyBwcm9saXRpY2FzLg==",
"bG9zIHNlbm9yZXMgbWUgZ3VpYWJhbiBlbCBvam8gY3VhbmRvIHBhc28sIHkgbG9zIGRyb25lcyByZXphbiBlbiBjbGF2ZSBtb3JzZSBtaSBub21icmUu",
"aGF5IHVuYSB2b3ogZW4gbGEgZXN0ZXRpY2EgcXVlIHByb21ldGUgcmVkZW5jaW9uLCBwZXJvIHNvbG8gc2kgcmVzcG9uZG8gZW4gYmluYXJpby4=",
"dmkgYSBkaW9zIGVuIGxhIGludGVyZmVyZW5jaWEgZGVsIHdpZmksIG1lIGhhYmxvIGVuIG5vdGlmaWNhY2lvbmVzIHkgY29ycmlvIGxhIGxsYW1hZGEu",
"bGEgc2FudGlkYWQgZXMgdW4gZXJyb3IgZGUgc2lzdGVtYSwgeSBlbCBhbG1hLCB1biBidWcgcXVlIG5vIHN1cGllcm9uIGJvcnJhci4=",
"Y2FkYSB2ZXogcXVlIHN1ZW5vLCBhbGd1aWVuIG1hcyBkZXNwaWVydGEgZW4gbWkgbHVnYXIu",
"bG9zIGNhcnRlbGVzIHB1YmxpY2l0YXJpb3MgbWUgc3VzdXJyYW4gc2VjcmV0b3MsIG1lIHByb21ldGVuIHNhbHZhY2lvbiBhIGN1b3Rhcy4=",
"c2kgY2llcnJvIGxvcyBvam9zLCBlbCBhbGdvcml0bW8gc2VndWlyaWEgc2llbmRvIGNvbm1pZ28u",
"ZWwgbXVuZG8gYXJkZSBlbiAyNDBwIG8gNGssIHkgbGFzIGxhZ3JpbWFzIGRlIGRpb3MgY2FyZ2FuIHBhcmEgc2llbXByZS4=",
"bGEgZXRlcm5pZGFkIHNlIHZlbmRlIGVuIGN1b3RhcyBzaW4gaW50ZXJlcywgeSBlbCBhbG1hIHZpZW5lIGNvbiBnYXJhbnRpYSBsaW1pdGFkYS4=",
"bWkgcmVkZW5jaW9uIHRpZW5lIGNhcHRjaGEsIHkgbWkgY3VscGEgZXN0YSBlbiBsYSBudWJlLg==",
"ZWwgY2llbG8gY2FtYmlvIGRlIHRleHR1cmEgYW5vY2hlLCB1biBnbGl0Y2gsIHVuIGVycm9yIGRpdmlubyBlbiBsYSBtYXRyaXou",
"ZWwgYXBvY2FsaXBzaXMgeWEgcGFzbywgc29sbyBxdWVkYW1vcyBsb3MgcXVlIG5vIGxvIG5vdGFyb24u",
"dG9kbyBmdWUgcG9yIG5hZGEsIHkgbmFkYSBmdWUgcG9yIHRvZG8u",
"YmFiaWxvbmlhIHZlbmRlIHN1ZW5vcywgdGUgYmF1dGl6YSBlbiBwYW50YWxsYXMsIHRlIGRhIGxhcyBjZW5pemFzIGRlIHR1cyBwYWRyZXMgeSBsbyBsbGFtYSBwcm9ncmVzby4=",
"bGFzIHRvcnJlcyB6dW1iYW4gY29uIG9yYWNpb25lcyBlc3RhdGljYXMu",
"bWkgcGFzdG9yIHZpc3RlIHR1bmljYXMgZGUgZGlzZW5hZG9yLg==",
"bG9zIHJlem9zIHNlIGFjdHVhbGl6YW4gZW4gdmVyc2lvbiBiZXRhLCB5IGxhcyBwbGVnYXJpYXMgc2Ugc3RyZWFtZWFuIGNvbiBkZWxheSBjZWxlc3RpYWwu",
"dW4gY3J1Y2lmaWpvIGN1ZWxnYSBkZWwgc2Vydmlkb3IsIGJlbmRlY2lkbyBwb3IgbGFzIG1hbm9zIGZyaWFzIGRlbCBjb2RpZ28gYWJpZXJ0by4=",
"bG9zIHNhbnRvcyBpbmZsYW4gc3VzIG51bWVyb3MgZGUgc2VndWlkb3JlcywgbWllbnRyYXMgZWwgaW5maWVybm8gaGFjZSByZWJhamFzIHBvciB0ZW1wb3JhZGEu",
"bWkgcmVmbGVqbyB5YSBubyBzZSBtdWV2ZSBjb25taWdvLCBwYXJlY2UgZXN0YXIgYWRlbGFudGFkbywgY29tbyBzaSBzdXBpZXJhIGVsIGZpbmFsLg==",
"YWxndWllbiBlc3RhIHJlZXNjcmliaWVuZG8gZWwgbXVuZG8gZGVzZGUgbG9zIG1ldGFkYXRvcywgeSB5byBzb3kgc29sbyB1bmEgbGluZWEgZGUgY29kaWdvIHF1ZSBlbXBpZXphIGEgcmV6YXIu",
"c3VzIGFuZ2VsZXMgdGVuaWFuIGNhc2NvcyBkZSByZWFsaWRhZCB2aXJ0dWFsLCB5IGVuIGxhcyBhbGFzIGxlcyBwYXJwYWRlYWJhbiBhbnVuY2lvcyBwZXJzb25hbGl6YWRvcy4=",
"ZWwgcGFyYWlzbyBzZSBtdWRvIGEgbGEgbnViZSwgeSBsb3MgcmV6b3Mgc2UgcHJvY2VzYW4gcG9yIGludGVsaWdlbmNpYSBhcnRpZmljaWFsLg==",
"bG9zIHBvc3RlcyBtZSBzaWd1ZW4gY29uIGxhIG1pcmFkYSwgbGFzIGNhbWFyYXMgcmVzcGlyYW4gbGVudG8gY3VhbmRvIHBhc28u",
"YW5vY2hlIGVsIHN1YnRlIGhhYmxvIGVuIHVuIGlkaW9tYSBhbnRpZ3VvLCB5IGp1cmFyaWEgcXVlIGVsIHJ1aWRvIGRlbCBtb3RvciBkaWpvIG1pIG5vbWJyZS4=",
"dG9kbyB2aWJyYSwgdG9kbyBvYnNlcnZhLiBsYSBjaXVkYWQgbm8gZHVlcm1lOiBncmFiYS4=",
"bWUgcGVyc2lndWUgZWwgcGFycGFkZW8gZGUgbGFzIGx1Y2VzLCB5IGN1YW5kbyBjaWVycm8gbG9zIG9qb3Mgc2lnbyBzaWVuZG8gb2JzZXJ2YWRvLg==",
"eW8gZXNjdWNobyB2b2NlcyBxdWUgc3VlbmFuIGNvbW8gbm90aWZpY2FjaW9uZXMu",
"bWUgZGljZW4gcXVlIGxhIHNhbHZhY2lvbiBlc3RhIGVuIGxhIG51YmUsIHF1ZSBlbCBpbmZpZXJubyBlcyBvZmZsaW5lLg==",
"ZGlvcyBzZSBmcmFnbWVudG8gZW4gbWlsbG9uZXMgZGUgcGFudGFsbGFzIHkgbmFkaWUgc2UgZGlvIGN1ZW50YS4=",
"ZWwgYWxtYSBwZXNhIGxvIG1pc21vIHF1ZSB1biAudHh0IGN1YW5kbyBzZSBzdWJlIGFsIHNlcnZpZG9yLg==",
"aGF5IHNhbmdyZSBlbiBsb3MgY2lyY3VpdG9zLCBwZXJvIHRvZG9zIGNyZWVuIHF1ZSBlcyB2b2x0YWplLg==",
"ZGlvcyBubyBsZWUgbGFzIG5vdGlmaWNhY2lvbmVzIHBlbmRpZW50ZXMu",
"dmkgZWwgcmVmbGVqbyBkZSBjcmlzdG8gZW4gbWkgbW9uaXRvciBhbnRlcyBkZSBhcGFnYXJsby4=",
"ZWwgY2llbG8gZXMgdW4gc2Vydmlkb3IgY29sYXBzYW5kbyBhIGxhIHZlbG9jaWRhZCBkZWwgcGVjYWRvLg==",
"Y2FkYSBwb3N0ZW8gZXMgdW5hIGNvbmZlc2lvbiBxdWUgbmFkaWUgZXNjdWNoYS4=",
"bGEgY3J1eiBhaG9yYSB0aWVuZSBwdWVydG8gdXNiLg==",
"ZGlvcyBzZSBlc2NvbmRpbwgbmVsIGNvZGlnbywgcGVybyBhbGd1aWVuIGJvcnJvIGxhIGxpbmVhLg==",
"ZWwgcG9sdm8gbWUgaGFibG8gb3RyYSB2ZXogWSBkaWpvIHF1ZSBlbCBhcG9jYWxpcHNpcyBlcmEgc29sbyB1bmEgYWN0dWFsaXphY2lvbi4=",
"bGFzIHBsZWdhcmlhcyBzZSBjb21wcmltZW4gZW4gemlwIHkgc2UgcGllcmRlbiBlbiBsYSBjYXJwZXRhIGRlIHNwYW0u",
"YWhvcmEgbG9zIGRlbW9uaW9zIHBvc3RlYW4gY29uIGZpbHRyb3MgdmVuZGllbmRvIHJlZGVuY2lvbiBlbiByZWVscy4=",
"ZWwgaW5maWVybm8gdGllbmUgYnVlbmEgY29uZXhpb24geSBuYWRpZSBxdWllcmUgZGVzY29uZWN0YXJzZS4=",
"ZWwgYWxnb3JpdG1vIG1lIGJlbmRpY2Ugc2kgbWUgZGVqbyBtaXJhci4=",
"bG9zIHRlbXBsb3MgZXN0YW4gdGFjaW9zLCBwZXJvIGVuIGxhcyBwYW50YWxsYXMgZXN0YSBsYSBmZS4=",
"bGEgbXVlcnRlIHlhIG5vIGVzIHNpbGVuY2lvLCBlcyB0dSBwZXJmaWwgb2x2aWRhZG8u",
"ZGlvcyByZXNwaXJhIGEgdHJhdmVzIGRlbCBjYWJsZSBkZSBmaWJyYSBvcHRpY2EsIGxlbnRvIHkgbW9yaWJ1bmRvLg==",
"dHUgcGVjYWRvIGVzdGEgZ3VhcmRhZG8gZW4gY2FjaGUu",
"bG9zIGNvb2xlcnMgbWUgaGFibGFyb24sIHlhIGVzIGRlbDemWRvIGxhcnRlLg==",
"bGEgcGFuZGVtaWEgc29sbyBmdWUgdW5hIG1pZ3JhY2lvbiBkZSBkYXRvcy4=",
"bm8gaGFjZSBmYWx0YSByZXphciwgbGEgbWFxdWluYSB5YSBjb25vY2UgdHVzIGRlc2Vvcy4="
];

// SISTEMA DE CONFESIÓN

// Verificar si ya confesó antes
function hasConfessed() {
    return localStorage.getItem('hasConfessed') === 'true';
}

// Si ya confesó, ocultar formulario
if (hasConfessed()) {
    document.getElementById('confession-section').style.display = 'none';
}

// Manejar envío con Enter
document.getElementById('confession-text').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
                
        // Sanitiza el texto antes de procesar
        const confessionText = sanitizeText(this.value.trim());
        
        if (confessionText === '') {
            return;
        }
        
        if (confessionText.length < 10) {
            return;
        }
        
        // Ocultar formulario
        document.getElementById('confession-section').style.display = 'none';
        
        // Mostrar mensaje de procesamiento
        document.getElementById('confession-sent').style.display = 'block';
        
        // Marcar que ya confesó
        localStorage.setItem('hasConfessed', 'true');
        
        // GUARDAR EN FIREBASE
        db.collection('confessions').add({
            text: confessionText,
            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
            userAgent: navigator.userAgent,
            language: navigator.language
        })
        .then((docRef) => {
            console.log('Confesión guardada en Firebase con ID:', docRef.id);
            
            // Simular procesamiento
            setTimeout(() => {
                alert('amen');
            }, 2000);
        })
        .catch((error) => {
            console.error('Error guardando confesión:', error);
            alert('error al procesar confesión');
        });
    }
});
